<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Idle Fishing Online</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<div class="app">

  <!-- ================= SCENES ================= -->

  <!-- MAIN SCENE -->
  <div class="scene scene-main active">

    <!-- Sun & Clouds -->
    <div class="sun"></div>
    <div class="cloud cloud1"></div>
    <div class="cloud cloud2"></div>
    <div class="cloud cloud3"></div>

    <!-- Water -->
    <div class="water-card" id="water">

      <!-- Footbridge -->
      <div class="footbridge"></div>

      <!-- Fisherman -->
      <div class="fisherman">
        <div class="head"></div>
        <div class="body"></div>
        <div class="rod">
          <div class="line"></div>
        </div>
      </div>

      <!-- SVG Wave Surface -->
      <svg class="wave" viewBox="0 0 1200 60" preserveAspectRatio="none">
        <path
          d="M0 30
             Q 50 20 100 30
             T 200 30
             T 300 30
             T 400 30
             T 500 30
             T 600 30
             T 700 30
             T 800 30
             T 900 30
             T 1000 30
             T 1100 30
             T 1200 30
             V60
             H0
             Z"
          fill="rgba(255,255,255,0.9)"
        />
      </svg>

    </div> <!-- end water-card -->

    <!-- Progress bar BELOW the water -->
    <div class="progress">
      <div class="progress-fill" id="progress"></div>
    </div>

    <!-- Auto-fishing timer -->
    <div class="auto-text">AUTO-FISHING IN <span id="timer">3</span>S</div>

    <!-- Cloud Save Status -->
    <div class="cloud-status" id="cloudStatus">
      <span id="cloudIcon">â˜ï¸</span>
      <span id="cloudText">Connecting...</span>
    </div>

    <!-- Last Catch Display -->
    <div class="last-catch" id="lastCatch">
      <div class="catch-label">LAST CATCH</div>
      <div class="catch-display">
        <span class="catch-icon" id="catchIcon">ğŸ£</span>
        <div class="catch-info">
          <span class="catch-name" id="catchName">Waiting...</span>
          <span class="catch-rarity" id="catchRarity"></span>
        </div>
      </div>
    </div>

  </div> <!-- end scene-main -->

  <!-- INVENTORY SCENE -->
  <div class="scene scene-inventory">
    <div class="inventory-header">
      <h3>ğŸ“¦ Inventory</h3>
      <div class="badge"><span id="total">0</span> Caught</div>
    </div>
    <div class="grid" id="inventory"></div>
  </div>

  <!-- CHARACTER SCENE -->
  <div class="scene scene-character">
    <div class="scene-content">
      <h2>ğŸ‘¤ Profile</h2>
      <div class="profile-card">
        <div class="profile-name" id="playerName">Anonymous Fisher</div>
        <button class="btn-primary" id="changeNameBtn">Change Name</button>
      </div>
      <div class="stats-card">
        <h3>ğŸ“Š Statistics</h3>
        <div class="stat-row">
          <span>Total Catches:</span>
          <span id="statTotal">0</span>
        </div>
        <div class="stat-row">
          <span>Unique Fish:</span>
          <span id="statUnique">0</span>
        </div>
        <div class="stat-row">
          <span>Rarest Catch:</span>
          <span id="statRarest">None</span>
        </div>
      </div>
    </div>
  </div>

  <!-- CLAN SCENE -->
  <div class="scene scene-clan">
    <div class="scene-content">
      <h2>ğŸ† Leaderboard</h2>
      <div class="leaderboard-tabs">
        <button class="tab-btn active" data-tab="catches">Most Catches</button>
        <button class="tab-btn" data-tab="unique">Most Unique</button>
      </div>
      <div class="leaderboard-list" id="leaderboard">
        <div class="loading">Loading...</div>
      </div>
    </div>
  </div>

  <!-- PVP SCENE -->
  <div class="scene scene-pvp">
    <div class="scene-content">
      <h2>ğŸŒ Global Stats</h2>
      <div class="global-stats">
        <div class="global-stat-card">
          <div class="global-stat-value" id="globalPlayers">-</div>
          <div class="global-stat-label">Active Players</div>
        </div>
        <div class="global-stat-card">
          <div class="global-stat-value" id="globalFish">-</div>
          <div class="global-stat-label">Total Fish Caught</div>
        </div>
      </div>
    </div>
  </div>

  <!-- ================= BOTTOM BUTTONS ================= -->
  <div class="bottom-buttons">
    <button data-scene="character">ğŸ‘¤<br>Profile</button>
    <button data-scene="inventory">ğŸ“¦<br>Inventory</button>
    <button data-scene="main" class="active">ğŸ£<br>Fishing</button>
    <button data-scene="clan">ğŸ†<br>Leaderboard</button>
    <button data-scene="pvp">ğŸŒ<br>Global</button>
  </div>

</div> <!-- end app -->

<!-- Offline Rewards Modal -->
<div class="offline-modal" id="offlineModal">
  <div class="offline-content">
    <div class="offline-header">
      <h2>ğŸ£ Welcome Back!</h2>
      <p class="offline-subtitle">While you were away...</p>
    </div>
    <div class="offline-summary">
      <div class="summary-item">
        <span class="summary-label">Total Caught:</span>
        <span class="summary-value" id="offlineTotal">0</span>
      </div>
      <div class="summary-item">
        <span class="summary-label">Time Away:</span>
        <span class="summary-value" id="offlineTime">0m</span>
      </div>
    </div>
    <div class="offline-fish-list" id="offlineFishList"></div>
    <button class="close-offline" id="closeOffline">Collect Rewards</button>
  </div>
</div>

<!-- Name Change Modal -->
<div class="offline-modal" id="nameModal">
  <div class="offline-content" style="max-width: 300px;">
    <div class="offline-header">
      <h2>Change Name</h2>
    </div>
    <div style="padding: 20px;">
      <input type="text" id="nameInput" placeholder="Enter your name" maxlength="20" style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px;">
    </div>
    <div style="padding: 0 20px 20px; display: flex; gap: 10px;">
      <button class="close-offline" id="cancelName" style="background: #ddd; flex: 1;">Cancel</button>
      <button class="close-offline" id="saveName" style="flex: 1;">Save</button>
    </div>
  </div>
</div>

<!-- Firebase SDKs -->
<script type="module">
  // Import Firebase
  import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
  import { getFirestore, doc, setDoc, getDoc, collection, query, orderBy, limit, getDocs, updateDoc, increment, onSnapshot } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

  // Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyAL7P4KF2V_Rxuo9wOOSpijbMyH0acWars",
    authDomain: "idle-fishing-online.firebaseapp.com",
    projectId: "idle-fishing-online",
    storageBucket: "idle-fishing-online.firebasestorage.app",
    messagingSenderId: "126620806068",
    appId: "1:126620806068:web:7b5c9d62629a75beea60e1",
    measurementId: "G-0BLFJJ369Q"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // Make Firebase available globally
  window.db = db;
  window.firestore = { doc, setDoc, getDoc, collection, query, orderBy, limit, getDocs, updateDoc, increment, onSnapshot };
</script>

<script src="main.js"></script>
</body>
</html>